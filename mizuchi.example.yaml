# Mizuchi Configuration File
# This is an example configuration
# Copy this file to mizuchi.yaml and customize for your project

# Global settings that apply to the entire pipeline
global:
  # Path to the context.h file used during compilation
  contextPath: '/path/to/your/context.h'

  # Maximum retry attempts per prompt (default: 25)
  maxRetries: 25

  # Output directory for generated files and reports (default: current directory)
  outputDir: '.'

  # Compiler flags to pass to agbcc
  compilerFlags: '-mthumb-interwork -Wimplicit -Wparentheses -Werror -O2 -fhex-asm'

  # Directory containing prompt folders
  # Discovers and loads prompts from directory structure
  # Each prompt lives in its own folder with:
  #   - prompt.md: The prompt content
  #   - settings.yaml: Metadata (functionName, targetObjectPath)
  promptsDir: './prompts'

  # Target platform for decompilation (default: gba)
  # Supported values: gba, nds, n3ds, n64, gc, wii, ps1, ps2, psp, win32, switch, android_x86, irix, saturn, dreamcast
  target: gba

# Plugin-specific configurations
# Each plugin receives only its own section along with the global config
plugins:
  # Claude Runner Plugin
  # Uses Claude Agent SDK to generate C code from assembly prompts
  # Responses are automatically cached to avoid redundant API calls
  claude-runner:
    # Path to the Claude Agent read the project codebase from
    projectPath: '/path/to/your/project'

    # Timeout in milliseconds for Claude requests (default: 300000 = 5 minutes)
    timeoutMs: 300000

    # Path to cache file for Claude responses (default: claude-cache.json in output directory)
    # cachePath: ./claude-cache.json

    # Custom system prompt for Claude (optional)
    # If not specified, uses the default decompilation system prompt
    # systemPrompt: |
    #   You are an automated decompilation system...

  # m2c Plugin (optional)
  # Runs m2c in the programmatic-flow phase before the AI-powered flow.
  # If m2c produces a match, the pipeline succeeds immediately.
  # Otherwise, the m2c output feeds into Claude Runner as additional context.
  # Requires: scripts/setup-m2c.sh to be run first
  m2c:
    # Enable or disable m2c programmatic-flow (default: true)
    enable: true
